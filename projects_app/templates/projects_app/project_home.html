{% extends 'projects_app/base.html' %}
{% load static %}
{% block content %}
<main id="main-content" class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8" id="projects-grid">
        {% for project_type, projects in projects_by_type.items %}
            {% for project in projects %}
                <div class="bg-[var(--bg-primary)] rounded-xl shadow-md overflow-hidden card-hover scroll-reveal" data-category="{{ project.get_project_type|slugify }}">
                    <div class="p-8">
                        <div class="flex items-center justify-between mb-6">
                            <div>
                                <h2 class="text-2xl md:text-3xl font-bold text-[var(--text-primary)]">
                                    {{ project.title }}
                                </h2>
                                <a href="{% url 'project_html_template' title=project.title %}" 
                                   class="text-blue-500 hover:text-blue-700 text-sm inline-flex items-center mt-1">
                                    <i class="fas fa-external-link-alt mr-1"></i> View Project
                                </a>
                            </div>
                            <div class="bg-blue-100 text-blue-800 dark:bg-blue-700 dark:text-white px-3 py-1 rounded-full text-sm font-semibold">
                                {{ project.project_type }}
                            </div>
                        </div>

                        <div class="border-t border-gray-200 my-6"></div>

                        <div class="mb-8">
                            <h3 class="text-lg font-semibold text-[var(--text-primary)] mb-3">Tech Stack</h3>
                            <div class="flex flex-wrap gap-2">
                                {% for tool in project.tools.all %}
                                <span class="tech-chip bg-[var(--bg-secondary)] px-3 py-1 rounded-full text-sm text-[var(--text-primary)]">
                                    {{ tool.name }}
                                </span>
                                {% endfor %}
                            </div>
                        </div>

                        <div class="border-t border-gray-200 my-6"></div>

                        <div class="mb-8">
                            {% if project.pdf_file %}
                            <a href="{{ project.pdf_file.url }}" 
                               class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                                <i class="fas fa-download mr-2"></i> Download Analysis File
                            </a>
                            {% else %}
                                <span class="inline-flex items-center px-4 py-2 text-gray-400 dark:text-gray-600 rounded-lg cursor-not-allowed">
                                    <i class="fas fa-ban mr-2"></i> No Download Available
                                </span>
                            {% endif %}
                        </div>

                        <div class="border-t border-gray-200 my-6"></div>

                        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center">
                            <div class="mb-4 sm:mb-0">
                                <h4 class="text-sm font-semibold text-[var(--text-primary)] mb-1">ANALYST</h4>
                                <p class="text-[var(--text-primary)]">
                                    {{ project.analyst.first_name }} {{ project.analyst.last_name }}
                                </p>
                            </div>
                            <div>
                                <h4 class="text-sm font-semibold text-[var(--text-primary)] mb-1">PUBLISHED</h4>
                                <p class="text-[var(--text-primary)]">
                                    {{ project.published_date|date:"F, Y" }}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        {% endfor %}
    </div>
    <footer class="mt-12 text-center text-[var(--text-secondary)] text-sm">
        <p>Â© 2025 The Data Matrix. All rights reserved.</p>
        <p class="mt-1">
            <a href="https://thedatamatrix.ca" class="hover:text-blue-600">Visit our website</a>
        </p>
    </footer>
</main>
{% endblock %}